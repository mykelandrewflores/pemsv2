<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/materialize.min.css">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <title>Employee Management/PEMS</title>
</head>

<body class="cloudy">
    <header class="padded">
        <div class="navbar-fixed">
            <nav class="white">
                <div class="nav-wrapper">
                    <ul class="left">
                        <li><a id="toggleNav" style="display: block" class="sidenav-trigger grey-text waves-effect" data-target="slide-out"><i class="fa fa-bars" aria-hidden="true"></i></a></li>
                        <li><span class="deafult-text dtime-now" id="">Date/Time</span></li>
                        <li><span class="deafult-text hide" id="comp_name_navbar">Company/PEMS</span></li>
                    </ul>
                    <div class="container nav-container">
                        <ul class="right">
                            <li><a><i class="fa fa-bell grey-text"></i></a></li>
                            <li><a><img src="../image/avatar.jpg" id="usersideavatar" class="circle" style="margin-top:15px" width="30" /></a>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <ul class="sidenav sidenav-fixed" id="slide-out">
            <li class="z-depth-2 white center" id="toggle_header_sidenav" style="height: 64px;font-size: 20px;"><span class="deafult-text" id="comp_name_sidenav">Company/PEMS</span></li>
            <li>
                <div class="user-view">
                    <div class="background primary">
                        <img src="" class="responsive-img" style="opacity: 0.1;margin-top:0;" id="sidepanel_bg" />
                    </div>
                    <a href="#user"><img class="circle" id="useravatar" src="../image/avatar.jpg"></a>
                    <a href="#name"><span class="white-text name" id="comp_name">John Doe</span></a>
                    <a href="#email"><span class="white-text email" id="det_em">johndoe@gmail.com</span></a>
                </div>
            </li>
            <li><a class="subheader">Functions</a></li>
            <li><a href="departments.html" class="collapsible-header"><i class="fa fa-building" aria-hidden="true"></i> Departments</a></li>
            <li><a href="index.html" class="collapsible-header"><i class="fa fa-building-o" aria-hidden="true"></i> Company Settings</a></li>
            <li class="active active-link"><a href="emplist.html" class="collapsible-header"><i class="fa fa-users" aria-hidden="true"></i> Employee Management</a></li>
            <li><a href="lccasettings.html" class="collapsible-header"><i class="fa fa-cog" aria-hidden="true"></i> LCCA Settings</a></li>
            <li onclick="logOut()"><a href="../index.html" class="collapsible-header" onclick="logOut()"><i class="fa fa-power-off" aria-hidden="true"></i> Logout</a></li>
        </ul>
    </header>
    <main class="mt-1">
        <div class="container">
            <h4 class="deafult-text">
                <blockquote>Employee Management</blockquote>
            </h4>
            <ul class="tabs tabs-fixed-width tab-demo" style="background-color: transparent;">
                <li class="tab"><a class="active" href="#employee">Active Employees</a></li>
                <li class="tab"><a href="#inemployee">Inactive Employees</a></li>
                <li class="tab"><a href="#addemployee">Add New Employee</a></li>
            </ul>
            <div class="row mt-br">
                <div id="employee" class="col s12">
                    <div class="col s12 m12 l12">
                        <h5>Employee:</h5>
                        <table class="table  centered responsive-table">
                            <thead>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Department</th>
                                <th>Action</th>
                            </thead>
                            <tbody id="proptabledata">
                                <tr>
                                    <td colspan="5">No Data</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="inemployee" class="col s12">
                    <div class="col s12 m12 l12">
                        <h5>Employee:</h5>
                        <table class="table  centered responsive-table">
                            <thead>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Department</th>
                                <th>Action</th>
                            </thead>
                            <tbody id="inact">
                                <tr>
                                    <td colspan="5">No Data</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="addemployee" class="col s12">
                    <div class="col s12 m12 l12">
                        <h5>Add Employees:</h5>
                        <form id="emp_form" class="mt-br">
                            <div class='input-field s12  m4 col l4'>
                                <input class='validate' type='text' name='emp_fname' id='emp_fname' placeholder="@John" required />
                                <label for='emp_fname'>FirstName</label>
                            </div>
                            <div class='input-field col s12 m4 l4'>
                                <input class='validate' type='text' name='emp_lname' id='emp_lname' placeholder="@Doe" required />
                                <label for='emp_lname'>LastName</label>
                            </div>
                            <div class='input-field col s12 m4 l4'>
                                <input class='validate' type='text' name='emp_fname' id='emp_mname' placeholder="@Toe" required />
                                <label for='emp_mname'>MiddleName</label>
                            </div>
                            <div class="input-field col s12 m6 l6">
                                <select id="emp_role" required onchange="roleCheck(this.value)">
										<option value="" disabled selected>Choose your option</option>
										<option value="Requisition">Requisitioning Officer</option>
										<option value="Supply">Supply Officer</option>
									</select>
                                <label>Role</label>
                            </div>
                            <div class="input-field col s12 m6 l6" required id="thRole">
                                <select id="emp_dept" class="browser-default">
										<option value="" disabled selected>Choose your Department</option>
									</select>
                            </div>
                            <div class='input-field col s12 m12 l12'>
                                <input class='validate' type='text' name='emp_username' id='emp_username' placeholder="@johndoe123" required />
                                <label for='emp_username'>Username</label>
                            </div>
                            <div class='input-field col s12 m6 l6'>
                                <input class='validate' type='password' name='emp_pass' id='emp_pass' pattern=".{8,}" required title="8 characters minimum" />
                                <label for='emp_pass'>Password</label>
                            </div>
                            <div class='input-field col s12 m6 l6'>
                                <input class='validate' type='password' name='emp_cpass' id='emp_cpass' placeholder="@23john21" required/>
                                <label for='emp_cpass'>Confirm Password</label>
                            </div>
                            <div class="col s12 center">
                                <button type='submit' name='btn_login' class='btn  waves-effect'>Add Employee</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="fixed-action-btn">
            <a class="btn-floating btn-large btn ">
					<i class="fa fa-cog"></i>
				</a>
            <ul>
                <li><a class="btn-floating red" id="change_red"></a></li>
                <li><a class="btn-floating blue" id="change_blue"></a></li>
                <li><a class="btn-floating green" id="change_green"></a></li>
                <li><a class="btn-floating orange" id="change_orange"></a></li>
                <li><a class="btn-floating indigo" id="change_indigo"></a></li>
            </ul>
        </div>
    </main>
    <div id="editmodal" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4 class="deafult-text font-weight-low">Edit Employees</h4>
            <div class="row">
                <div class="input-field col s12">
                    <input id="editemp_userid" type="text" hidden class="validate">
                </div>
                <div class="input-field col s12 m12 l12">
                    <input id="editemp_username" type="text" class="validate" placeholder="@John Doe">
                    <label for="editemp_username">Username</label>
                </div>
                <div class="input-field col s12 m4 l4">
                    <input id="editemp_fname" type="text" class="validate" placeholder="@John">
                    <label for="editemp_fname">Firstname</label>
                </div>
                <div class="input-field col s12 m4 l4">
                    <input id="editemp_lname" type="text" class="validate" placeholder="@Doe">
                    <label for="editemp_lname">Lastname</label>
                </div>
                <div class="input-field col s12 m4 l4">
                    <input id="editemp_mname" type="text" class="validate" placeholder="@Toe">
                    <label for="editemp_mname">Middlename</label>
                </div>
                <div class="input-field col l6 m6 s12">
                    <select id="editemp_role" required onchange="roleCheckModal(this.value)">
							<option value="" disabled selected>Choose your option</option>
							<option value="Requisition">Requisition</option>
							<option value="Supply">Supply</option>
						</select>
                    <label>Role</label>
                </div>
                <div class="input-field col l6 m6 s12" id="thsRole">
                    <select id="editemp_dept" class="browser-default">
							<option value="" disabled selected>Choose your Department</option>
						</select>
                </div>
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn green" onclick="update_func()">Update Employee</button>
				<a href="#!" class="modal-close waves-effect waves-red btn-flat">Cancel</a>
			</div>
		</div>
		<script src="../js/jquery.min.js"></script>
		<script src="../js/materialize.min.js"></script>
		<script src="../js/init.js"></script>
		<script src="../js/changing_color.js"></script>
		<script src="js/property_data.js"></script>
		<script src="../js/func.js"></script>
		<script src="js/userimg.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				var id = localStorage.companyID;
				selectCompany(id)
			});
			selectCompanyEmply(localStorage.companyID);
			var companyId = localStorage.companyID;
			$.getJSON("http://gordoncollegeccs-ssite.net/pems/apis/myapi/select/tbl_departments/fldCompanyID/" + companyId, function(data) {
				var ls = "";
				if (data.length > 0) {
					for (let i = 0; i < data.length; i++) {
						ls += '<option name="' + data[i].fldDepartmentName + '">' + data[i].fldDepartmentName + '</option>'
					}
					$("#emp_dept").html(ls);
					$("#editemp_dept").html(ls);
				}
			});

        function roleCheck(val) {
            if (val == "Requisition") {
                selDept();
                $("#thRole").css("display", "block");
            } else {
                $("#thRole").css("display", "none");
                $("#emp_dept").val('');
            }
        }

        function roleCheckModal(val) {
            if (val == "Requisition") {
                $("#thsRole").css("display", "block");
            } else {
                $("#thsRole").css("display", "none");
            }
        }

    </script>
</body>

</html>
