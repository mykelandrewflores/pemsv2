<!DOCTYPE html>
<!-- saved from url=(0071) -->
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design Bootstrap -->
    <link href="assets/css/mdb.min.css" rel="stylesheet">

    <link href="assets/css/font-awesome.css" rel="stylesheet">
    <link href="assets/css/stepper.css" rel="stylesheet">

    <body class="fixed-sn white-skin" data-gr-c-s-loaded="true">

        <!--Double navigation-->
        <header>
            <!-- Sidebar navigation -->
            <div id="slide-out" class="side-nav sn-bg-4 fixed" style="transform: translateX(0%);">
                <ul class="custom-scrollbar">
                    <!-- Logo -->
                    <li>
                        <center>
                            <img src="assets/img/mdb-transparent.png" class="img-fluid flex-center" style="border-radius: 100%" width="150px">
                        </center>
                    </li>
                    <!--/. Logo -->

                    <!--/.Search Form-->
                    <!-- Side navigation links -->
                    <li>
                        <hr>
                        <ul class="collapsible collapsible-accordion">
                            <li><a class="collapsible-header waves-effect arrow-r" href="../../CompAdmin/departments.html"><i class="fa fa-arrow-left"></i> Back to Website<i class="fa fa-angle-down rotate-icon"></i></a>
                            </li>
                        </ul>
                    </li>
                    <!--/. Side navigation links -->
                </ul>
                <div class="sidenav-bg mask-strong"></div>
            </div>
            <!--/. Sidebar navigation -->
            <!-- Navbar -->
            <nav class="navbar fixed-top navbar-toggleable-md navbar-expand-lg scrolling-navbar double-nav" style="background-color: #30ba40">
                <!-- SideNav slide-out button -->
                <div class="float-left">
                    <a href="#" data-activates="slide-out" class="button-collapse white-text"><i class="fa fa-bars"></i></a>
                </div>
                <!-- Breadcrumb-->
                <div class="breadcrumb-dn mr-auto white-text">
                    <p>Life Cycle Cost Analysis</p>
                </div>
            </nav>
            <!-- /.Navbar -->
        </header>
        <!--/.Double navigation-->

        <!--Main layout-->
        <main>
            <div class="container text-center">
                <div class="row">
                    <div class="col-md-12">

                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs nav-justified green">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#panel1" role="tab"><i class="fa fa-truck"></i>Assets</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#panel2" role="tab"><i class="fa fa-money"></i> Costs</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#panel3" role="tab"><i class="fa fa-percent"></i> Rates</a>
                            </li>
                        </ul>
                        <!-- Tab panels -->
                        <div class="tab-content card">
                            <!--Panel 1-->
                            <div class="tab-pane fade in show active" id="panel1" role="tabpanel">
                                <div class="row">
                                    <div class="col-12 col-lg-12">
                                        <h4><i class="fa fa-car"></i> Asset & # of Life Cycle Year</h4>
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="assetType" class="grey-text">Asset Type</label>
                                        <input type="text" id="assetType" class="form-control">
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="assetType" class="grey-text"># of Life Cycle Year</label>
                                        <input type="number" id="noLifeCycle" class="form-control" onblur="checkYr(this.value)">
                                    </div>
                                    <div class="col-lg-3 col-sm-12">
                                        <button class="btn green btn-rounded" onclick="insertAsset()"><i class="fa fa-plus"></i> Insert Asset</button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <hr>
                                        <h5>Asset Lists</h5>
                                        <center>
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Asset Type</th>
                                                        <th>Life Cycle Years</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="assetList">

                                                </tbody>
                                            </table>
                                        </center>
                                    </div>
                                </div>
                            </div>
                            <!--/.Panel 1-->
                            <!--Panel 2-->
                            <div class="tab-pane fade" id="panel2" role="tabpanel">
                                <div class="row">
                                    <div class="col-12">
                                        <hr>
                                        <h3><i class="fa fa-money"></i> Costs</h3>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="costName" class="grey-text">Cost Name</label>
                                        <input id="costName" type="text" class="form-control">
                                    </div>
                                    <div class="col-sm-4" style="margin-top: 15px;">
                                        <select id="costType" class="mdb-select" onchange="CostTypeSel(this.value)">
                                            <option value="otcost">One Time Cost</option>
                                            <option value="rccost">Recurring Cost</option>
                                        </select>
                                        <label for="costType" class="grey-text">Cost Type:</label>
                                    </div>
                                    <div class="col-sm-4">
                                        <div id="myOtCost" style="margin-top: 15px">
                                            <select class="mdb-select" id="otCostType">
                                                    <option value="initialYear">Initial Year</option>
                                                    <option value="lastYear">Last Year</option>
                                            </select>
                                            <label for="otCostType" class="grey-text">One time Cost Type</label>
                                        </div>
                                        <div id="rcCostType">
                                            <label for="escalationRate" class="grey-text">Escalation Rate</label>
                                            <input id="escalationRate" type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-sm-12 flex-center">
                                        <button class="btn green btn-rounded" onclick="insertCost()"><i class="fa fa-plus"></i> Insert Cost</button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <hr>
                                        <h5>Costs List</h5>
                                        <center>
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Cost Name</th>
                                                        <th>Cost Type</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="costsList">

                                                </tbody>
                                            </table>
                                        </center>
                                    </div>
                                </div>



                            </div>
                            <!--/.Panel 2-->
                            <!--Panel 3-->
                            <div class="tab-pane fade" id="panel3" role="tabpanel">
                                <div class="row">
                                    <div class="col-12">
                                        <hr>
                                        <h3><i class="fa fa-percent"></i> Rates</h3>
                                    </div>
                                    <div class="col-lg-5 col-md-12">
                                        <label for="discountRate" class="grey-text">Discount Rate in %</label>
                                        <input type="number" id="discountRate" class="form-control">
                                    </div>
                                    <div class="col-lg-5 col-sm-12" style="margin-top: 15px">
                                        <button class="btn green btn-rounded" onclick="insertRate()"><i class="fa fa-plus"></i> Save Rate</button>
                                    </div>
                                </div>
                            </div>
                            <!--/.Panel 3-->
                        </div>

                    </div>
                </div>
            </div>

        </main>
        <!--/Main layout-->

        <!--Footer-->
        <br><br><br><br>
        <script type="text/javascript" src="js/jquery-3.2.0.min.js"></script>
        <script type="text/javascript" src="js/popper.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/mdb.min.js"></script>
        <script type="text/javascript" src="js/Chart.min.js"></script>
        <script type="text/javascript" src="js/Chart.bundle.min.js"></script>
        <script type="text/javascript" src="js/stepper.js"></script>
        <script type="text/javascript" src="js/mainfunc.js"></script>
        <script type="text/javascript" src="js/user.js"></script>
        <script>
            // SideNav Initialization
            $(".button-collapse").sideNav();
            $('.mdb-select').material_select();
            new WOW().init();

        </script>
        <script>
            viewAssets();
            viewCosts();
            viewRate();
            CostTypeSel("otcost");


            function checkYr(val) {
                if (val > 20) {
                    window.alert("Please make sure year is not Greater than 20");
                    document.getElementById("noLifeCycle").value = "";
                }
            }

            function CostTypeSel(val) {
                if (val == "otcost") {
                    document.getElementById("myOtCost").style.display = "block";
                    document.getElementById("rcCostType").style.display = "none";
                } else {
                    document.getElementById("myOtCost").style.display = "none";
                    document.getElementById("rcCostType").style.display = "block";
                }
            }

            function viewAssets() {
                let longString = "";
                datas[0].assets = [];
                $.ajaxSetup({
                    async: false
                });

                $.getJSON("http://localhost/pems/apis/myapi/select/tbl_lccalives/", function(data) {
                    for (let i = 0; i < data.length; i++) {
                        let jsonObj;
                        jsonObj = JSON.parse('{ "assetType":"' + data[i].fldProdName + '", "noLifeCycle":"' + data[i].fldYears + '"}');
                        datas[0].assets.push(jsonObj);
                    }
                });


                for (let i = 0; i < datas[0].assets.length; i++) {
                    longString += "<tr>";
                    longString += "<td>" + datas[0].assets[i].assetType + "</td>";
                    longString += "<td>" + datas[0].assets[i].noLifeCycle + "</td>";
                    longString += "<td><button type='button' onclick='removeAsset(" + i + ")' class='btn red white-text'><i class='fa fa-remove'></i></td>";
                    longString += "</tr>";
                }
                $("#assetList").html(longString);
            }

            function removeAsset(val) {
                datas[0].assets.splice(val, 1);
                viewAssets();
                saveData();
            }

            function viewCosts() {
                let longString = "";
                for (let i = 0; i < datas[1].costs.length; i++) {
                    longString += "<tr>";
                    longString += "<td>" + datas[1].costs[i].costName + "</td>";
                    longString += "<td>" + datas[1].costs[i].costType + "</td>";
                    longString += "<td><button type='button' onclick='removeCost(" + i + ")' class='btn red white-text'><i class='fa fa-remove'></i></td>";
                    longString += "</tr>";
                }
                $("#costsList").html(longString);
            }

            function removeCost(val) {
                datas[1].costs.splice(val, 1);
                viewCosts();
                saveData();
            }

            function viewRate() {
                document.getElementById("discountRate").value = datas[2].rates.discountRate;
            }

        </script>

</html>
